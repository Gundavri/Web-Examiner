function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Zlby:function(t,e,n){"use strict";n.r(e);var i,a=n("ofXK"),r=n("AytR"),s=n("fXoL"),o=n("lJxs"),c=n("tk/3"),u=((i=function(){function t(e){_classCallCheck(this,t),this.httpClient=e,this.urlSuffix="/question",this.questions=[]}return _createClass(t,[{key:"questionGetAll$",value:function(){var t=this;return this.httpClient.get(this.urlSuffix).pipe(Object(o.a)((function(e){return e.map(t.addImagePath)})))}},{key:"questionsGet$",value:function(t){var e=this;return this.httpClient.get(this.urlSuffix+"/"+t).pipe(Object(o.a)((function(t){return t.map(e.addImagePath)})))}},{key:"questionDelete$",value:function(t){return this.httpClient.delete(this.urlSuffix+"/"+t)}},{key:"questionPost$",value:function(t){var e=new FormData;return e.append("question",t.question),e.append("question_img",t.question_img),e.append("parent_exam_num",String(t.parent_exam_num)),this.httpClient.post(this.urlSuffix,e)}},{key:"questionPut$",value:function(t,e){return this.httpClient.put(this.urlSuffix+"/"+t,e)}},{key:"addImagePath",value:function(t){return t.question_img=r.a.IMAGE_BASE_URL+t.question_img,t}}]),t}()).\u0275fac=function(t){return new(t||i)(s.Vb(c.b))},i.\u0275prov=s.Ib({token:i,factory:i.\u0275fac}),i),l=n("4xmj"),d=n("S+vS"),b=n("kmnG"),p=n("qFsG"),m=n("bTqV");function h(t,e){if(1&t){var n=s.Sb();s.Rb(0,"div",5),s.Rb(1,"div",6),s.Rb(2,"strong"),s.uc(3,"Exam #"),s.Qb(),s.uc(4),s.Qb(),s.Rb(5,"div",7),s.Rb(6,"strong"),s.uc(7,"Question:"),s.Qb(),s.uc(8),s.Qb(),s.Rb(9,"div",8),s.Zb("click",(function(t){s.nc(n);var i=e.index;return s.dc().openImage(i)})),s.uc(10,"Image"),s.Qb(),s.Rb(11,"div",9),s.Rb(12,"button",10),s.Zb("click",(function(t){s.nc(n);var i=e.index;return s.dc().onAnswers(i)})),s.uc(13,"Answers"),s.Qb(),s.Qb(),s.Rb(14,"div",9),s.Rb(15,"button",11),s.Zb("click",(function(t){s.nc(n);var i=e.index;return s.dc().onUpdate(i)})),s.uc(16,"Update"),s.Qb(),s.Qb(),s.Rb(17,"div",9),s.Rb(18,"button",12),s.Zb("click",(function(t){s.nc(n);var i=e.index;return s.dc().onDelete(i)})),s.uc(19,"Delete"),s.Qb(),s.Qb(),s.Qb()}if(2&t){var i=e.$implicit;s.Bb(4),s.wc(" ",i.parent_exam_num,""),s.Bb(4),s.wc(" ",i.question.substr(0,70),"")}}var f,g,v,w,x,_,q,k=((f=function(){function t(e,n,i){_classCallCheck(this,t),this.questionService=e,this.snackbarService=n,this.dialogService=i,this.questionsToShow=[],this.prevSearch="",this.urlParam=0,this.subscriptionsArr=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.getQuestions()}},{key:"getQuestions",value:function(){var t=this;this.subscriptionsArr.push(this.questionService.questionGetAll$().subscribe((function(e){t.questionService.questions=e,t.search()}),this.snackbarService.displayError))}},{key:"onAdd",value:function(){var t=this;this.subscriptionsArr.push(this.dialogService.openCreateUpdateQuestionDialog({question:"",parent_exam_num:null}).subscribe((function(e){e&&t.subscriptionsArr.push(t.questionService.questionPost$(e).subscribe((function(e){e.question_img=r.a.IMAGE_BASE_URL+e.question_img,t.questionService.questions.push(e),t.search()}),t.snackbarService.displayError))})))}},{key:"onUpdate",value:function(t){var e=this;this.subscriptionsArr.push(this.dialogService.openCreateUpdateQuestionDialog(this.questionService.questions[t]).subscribe((function(n){n&&e.subscriptionsArr.push(e.questionService.questionPut$(e.questionsToShow[t]._id,n).subscribe((function(i){for(var a=0;a<e.questionService.questions.length;a++)if(e.questionService.questions[a]._id===e.questionsToShow[t]._id){e.questionService.questions[a].parent_exam_num=n.parent_exam_num?n.parent_exam_num:null,e.questionService.questions[a].question=n.question;break}e.search()}),e.snackbarService.displayError))})))}},{key:"onDelete",value:function(t){var e=this;this.subscriptionsArr.push(this.dialogService.openConfirmDialog().subscribe((function(n){n&&e.subscriptionsArr.push(e.questionService.questionDelete$(e.questionsToShow[t]._id).subscribe((function(n){e.questionService.questions=e.questionService.questions.filter((function(n){return n._id!==e.questionsToShow[t]._id})),e.search()}),e.snackbarService.displayError))})))}},{key:"onAnswers",value:function(t){this.subscriptionsArr.push(this.dialogService.openAnswersDialog(this.questionsToShow[t]).subscribe((function(t){})))}},{key:"search",value:function(){var t=this;this.questionsToShow=_toConsumableArray(this.questionService.questions),this.questionsToShow=this.questionService.questions.filter((function(e){return e.question.toLowerCase().includes(t.prevSearch.toLowerCase())||e.parent_exam_num.toString().includes(t.prevSearch)}))}},{key:"onSearchChange",value:function(t){this.prevSearch=t,this.search()}},{key:"openImage",value:function(t){this.questionsToShow[t].question_img&&this.subscriptionsArr.push(this.dialogService.openViewImage(this.questionsToShow[t].question_img).subscribe((function(){})))}},{key:"ngOnDestroy",value:function(){this.subscriptionsArr.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||f)(s.Mb(u),s.Mb(l.a),s.Mb(d.a))},f.\u0275cmp=s.Gb({type:f,selectors:[["app-questions"]],decls:9,vars:1,consts:[[1,"add-question"],["matInput","","placeholder","","type","text",3,"input"],["search",""],["mat-raised-button","","color","primary",1,"question-btn-add",3,"click"],["class","wrapper-question",4,"ngFor","ngForOf"],[1,"wrapper-question"],[1,"question-info-very-small"],[1,"question-info-small"],[1,"question-info-btn","img-btn",3,"click"],[1,"question-info","question-info-btn"],["mat-raised-button","","color","primary",1,"question-btn",3,"click"],["mat-raised-button","","color","accent",1,"question-btn",3,"click"],["mat-raised-button","","color","warn",1,"question-btn",3,"click"]],template:function(t,e){if(1&t){var n=s.Sb();s.Rb(0,"div",0),s.Rb(1,"mat-form-field"),s.Rb(2,"mat-label"),s.uc(3,"Search Question"),s.Qb(),s.Rb(4,"input",1,2),s.Zb("input",(function(t){s.nc(n);var i=s.lc(5);return e.onSearchChange(i.value)})),s.Qb(),s.Qb(),s.Rb(6,"button",3),s.Zb("click",(function(t){return e.onAdd()})),s.uc(7,"Add question"),s.Qb(),s.Qb(),s.tc(8,h,20,2,"div",4)}2&t&&(s.Bb(8),s.ic("ngForOf",e.questionsToShow))},directives:[b.b,b.e,p.a,m.a,a.i],styles:[".wrapper-question[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:3%;padding:5px;width:95%;margin:1.5% auto;background-color:rgba(0,0,0,.03);-webkit-box-align:center;align-items:center}.wrapper-question[_ngcontent-%COMP%]   .question-info[_ngcontent-%COMP%]{-webkit-box-flex:100;flex:100}.wrapper-question[_ngcontent-%COMP%]   .question-info-small[_ngcontent-%COMP%]{-webkit-box-flex:80;flex:80}.wrapper-question[_ngcontent-%COMP%]   .question-info-very-small[_ngcontent-%COMP%]{-webkit-box-flex:10;flex:10}.wrapper-question[_ngcontent-%COMP%]   .question-info-btn[_ngcontent-%COMP%]{-webkit-box-flex:8;flex:8}.wrapper-question[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;display:inline-block;-webkit-transform:translateY(-5px);transform:translateY(-5px)}.wrapper-question[_ngcontent-%COMP%]   .question-btn[_ngcontent-%COMP%]{height:15px;width:25px;font-size:10px;line-height:7px}.wrapper-question[_ngcontent-%COMP%]   .img-btn[_ngcontent-%COMP%]{text-align:center;margin-right:10px;cursor:pointer;border:1px solid rgba(0,0,0,.2);border-radius:4px}.wrapper-question[_ngcontent-%COMP%]   .img-btn[_ngcontent-%COMP%]:hover{border:1px solid rgba(0,0,0,.4)}.add-question[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.add-question[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-left:2.5%;margin-top:1%}.add-question[_ngcontent-%COMP%]   .question-btn-add[_ngcontent-%COMP%]{margin-right:2.5%;margin-top:1%}"]}),f),C=n("tyNb"),y=n("PCNd"),S=n("R1ws"),P=n("FKr1"),Q=["*",[["mat-card-footer"]]],M=["*","mat-card-footer"],O=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],R=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"],A=((q=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||q)},q.\u0275dir=s.Hb({type:q,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),q),I=((_=function t(){_classCallCheck(this,t),this.align="start"}).\u0275fac=function(t){return new(t||_)},_.\u0275dir=s.Hb({type:_,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,e){2&t&&s.Db("mat-card-actions-align-end","end"===e.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),_),D=((x=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||x)},x.\u0275dir=s.Hb({type:x,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),x),T=((w=function t(e){_classCallCheck(this,t),this._animationMode=e}).\u0275fac=function(t){return new(t||w)(s.Mb(S.a,8))},w.\u0275cmp=s.Gb({type:w,selectors:[["mat-card"]],hostAttrs:[1,"mat-card"],hostVars:2,hostBindings:function(t,e){2&t&&s.Db("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:M,decls:2,vars:0,template:function(t,e){1&t&&(s.hc(Q),s.gc(0),s.gc(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),w),$=((v=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||v)},v.\u0275cmp=s.Gb({type:v,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:R,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,e){1&t&&(s.hc(O),s.gc(0),s.Rb(1,"div",0),s.gc(2,1),s.Qb(),s.gc(3,2))},encapsulation:2,changeDetection:0}),v),E=((g=function t(){_classCallCheck(this,t)}).\u0275mod=s.Kb({type:g}),g.\u0275inj=s.Jb({factory:function(t){return new(t||g)},imports:[[P.c],P.c]}),g),N=n("n4v8"),j=n("NFeN");function B(t,e){if(1&t&&s.Nb(0,"img",26),2&t){var n=s.dc().$implicit;s.ic("src",n.question_img,s.oc)}}function Z(t,e){if(1&t){var n=s.Sb();s.Rb(0,"div",27),s.Rb(1,"mat-form-field"),s.Nb(2,"textarea",28,29),s.Qb(),s.Rb(4,"mat-form-field",30),s.Nb(5,"input",28,31),s.Qb(),s.Rb(7,"div",32),s.Nb(8,"img",33),s.Qb(),s.Rb(9,"div",34),s.Rb(10,"button",21),s.Zb("click",(function(t){s.nc(n);var i=e.index,a=s.lc(3),r=s.lc(6),o=s.dc().$implicit;return s.dc().onUpdate(i,a.value,r.value,o._id)})),s.Rb(11,"mat-icon"),s.uc(12,"save"),s.Qb(),s.Qb(),s.Rb(13,"button",35),s.Zb("click",(function(t){s.nc(n);var i=e.index,a=s.dc().$implicit;return s.dc().onDelete(i,a._id)})),s.Rb(14,"mat-icon"),s.uc(15,"clear"),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&t){var i=e.$implicit;s.Bb(2),s.ic("value",i.answer),s.Bb(3),s.ic("value",i.point),s.Bb(3),s.ic("src",i.answer_img,s.oc)}}function U(t,e){if(1&t&&s.Nb(0,"img",43),2&t){var n=s.dc(2).$implicit,i=s.dc();s.ic("src",i.imgSrc[n._id],s.oc)}}function G(t,e){if(1&t){var n=s.Sb();s.Rb(0,"div",27),s.Rb(1,"mat-form-field"),s.Nb(2,"textarea",36,37),s.Qb(),s.Rb(4,"mat-form-field",30),s.Nb(5,"input",36,38),s.Qb(),s.Rb(7,"div",32),s.Rb(8,"label",39),s.Rb(9,"span",40),s.Rb(10,"mat-icon"),s.uc(11,"attachment"),s.Qb(),s.Qb(),s.Rb(12,"input",41),s.Zb("change",(function(t){s.nc(n);var e=s.dc().$implicit;return s.dc().onChange(t.target.files,e._id)})),s.Qb(),s.Qb(),s.tc(13,U,1,1,"img",42),s.Qb(),s.Rb(14,"div",34),s.Rb(15,"button",21),s.Zb("click",(function(t){s.nc(n);var e=s.lc(3),i=s.lc(6),a=s.dc().$implicit;return s.dc().onNew(e.value,i.value,a._id)})),s.Rb(16,"mat-icon"),s.uc(17,"save"),s.Qb(),s.Qb(),s.Rb(18,"button",35),s.Zb("click",(function(t){s.nc(n);var e=s.dc().$implicit;return s.dc().onClear(e._id)})),s.Rb(19,"mat-icon"),s.uc(20,"clear"),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&t){var i=s.dc().$implicit,a=s.dc();s.Bb(13),s.ic("ngIf",a.imgSrc[i._id])}}function F(t,e){if(1&t){var n=s.Sb();s.Rb(0,"mat-card",6),s.Rb(1,"mat-card-header"),s.Rb(2,"div",7),s.Rb(3,"mat-form-field"),s.Rb(4,"mat-label"),s.uc(5,"Exam Num"),s.Qb(),s.Rb(6,"input",8,9),s.Zb("input",(function(t){s.nc(n);var i=e.index,a=s.lc(7),r=s.lc(13);return s.dc().changeIsDisabled(a.value,r.value,i)})),s.Qb(),s.Qb(),s.Qb(),s.Rb(8,"div",10),s.Rb(9,"mat-form-field"),s.Rb(10,"mat-label"),s.uc(11,"Question"),s.Qb(),s.Rb(12,"textarea",11,12),s.Zb("input",(function(t){s.nc(n);var i=e.index,a=s.lc(7),r=s.lc(13);return s.dc().changeIsDisabled(a.value,r.value,i)})),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(14,"div",13),s.tc(15,B,1,1,"img",14),s.Qb(),s.Rb(16,"mat-card-content"),s.Rb(17,"div",15),s.Rb(18,"div",16),s.Rb(19,"div",17),s.uc(20,"Answer"),s.Qb(),s.Rb(21,"div",18),s.uc(22,"Point"),s.Qb(),s.Rb(23,"div",19),s.uc(24,"Image"),s.Qb(),s.Qb(),s.Rb(25,"div",20),s.Rb(26,"button",21),s.Zb("click",(function(t){s.nc(n);var i=e.$implicit,a=s.dc();return a.addClicked[i._id]=!0,a.lastAnswersParent=i._id})),s.Rb(27,"mat-icon"),s.uc(28,"add"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.tc(29,Z,16,3,"div",22),s.tc(30,G,21,1,"div",23),s.Qb(),s.Rb(31,"mat-card-actions"),s.Rb(32,"button",24),s.Zb("click",(function(t){s.nc(n);var i=e.index,a=s.lc(7),r=s.lc(13);return s.dc().onQuestionUpdate(i,a.value,r.value)})),s.uc(33,"Save"),s.Qb(),s.Rb(34,"button",25),s.Zb("click",(function(t){s.nc(n);var i=e.index;return s.dc().onQuestionDelete(i)})),s.uc(35,"Delete"),s.Qb(),s.Qb(),s.Qb()}if(2&t){var i=e.$implicit,a=e.index,r=s.dc();s.Bb(6),s.ic("value",i.parent_exam_num),s.Bb(6),s.ic("value",i.question),s.Bb(3),s.ic("ngIf",i.question_img),s.Bb(14),s.ic("ngForOf",r.answers[i._id]),s.Bb(1),s.ic("ngIf",r.addClicked[i._id]),s.Bb(2),s.ic("disabled",r.isDisabled[a])}}var L,z=((L=function(){function t(e,n,i,a,r){_classCallCheck(this,t),this.questionService=e,this.answerService=n,this.snackbarService=i,this.dialogService=a,this.route=r,this.questionsToShow=[],this.isDisabled=[],this.answers={},this.prevSearch="",this.urlParam=0,this.addClicked={},this.imgSrc={},this.image={},this.subscriptionsArr=[]}return _createClass(t,[{key:"handleImgPaste",value:function(t){t.length>0&&this.lastAnswersParent&&this.addClicked[this.lastAnswersParent]&&this.onChange(t,this.lastAnswersParent)}},{key:"ngOnInit",value:function(){this.urlParam=Number(this.route.snapshot.params.id),this.getQuestions()}},{key:"getQuestions",value:function(){var t=this;this.subscriptionsArr.push(this.questionService.questionsGet$(this.urlParam).subscribe((function(e){t.questionService.questions=e,t.questionService.questions.forEach((function(e){t.getAnswer(e._id),t.addClicked[e._id]=!1})),t.search()}),this.snackbarService.displayError))}},{key:"getAnswer",value:function(t){var e=this;this.subscriptionsArr.push(this.answerService.answersGet$(t).subscribe((function(n){e.answers[t]=n})))}},{key:"onQuestionAdd",value:function(){var t=this;this.subscriptionsArr.push(this.dialogService.openCreateUpdateQuestionDialog({question:"",parent_exam_num:this.urlParam}).subscribe((function(e){e&&t.subscriptionsArr.push(t.questionService.questionPost$(e).subscribe((function(e){e.question_img=r.a.IMAGE_BASE_URL+e.question_img,t.questionService.questions.push(e),t.search()}),t.snackbarService.displayError))})))}},{key:"onQuestionUpdate",value:function(t,e,n){var i=this;this.subscriptionsArr.push(this.questionService.questionPut$(this.questionsToShow[t]._id,{parent_exam_num:Number(e),question:n}).subscribe((function(a){for(var r=0;r<i.questionService.questions.length;r++)if(i.questionService.questions[r]._id===i.questionsToShow[t]._id){i.questionService.questions[r].parent_exam_num!==Number(e)?i.questionService.questions.splice(r,1):i.questionService.questions[r].question=n;break}i.search()}),this.snackbarService.displayError))}},{key:"changeIsDisabled",value:function(t,e,n){this.isDisabled[n]=Number(t)===this.questionsToShow[n].parent_exam_num&&e===this.questionsToShow[n].question}},{key:"onQuestionDelete",value:function(t){var e=this;this.subscriptionsArr.push(this.dialogService.openConfirmDialog().subscribe((function(n){n&&e.subscriptionsArr.push(e.questionService.questionDelete$(e.questionsToShow[t]._id).subscribe((function(n){e.questionService.questions=e.questionService.questions.filter((function(n){return n._id!==e.questionsToShow[t]._id})),e.search()}),e.snackbarService.displayError))})))}},{key:"search",value:function(){var t=this;this.questionsToShow=_toConsumableArray(this.questionService.questions),this.isDisabled=new Array(this.questionsToShow.length).fill(!0),this.questionsToShow=this.questionService.questions.filter((function(e){return e.question.toLowerCase().includes(t.prevSearch.toLowerCase())||e.parent_exam_num.toString().includes(t.prevSearch)}))}},{key:"onSearchChange",value:function(t){this.prevSearch=t,this.search()}},{key:"onNew",value:function(t,e,n){var i=this;this.subscriptionsArr.push(this.answerService.answerPost$({answer:t,point:Number(e),parent_question:n,answer_img:this.image[n]}).subscribe((function(t){t.answer_img=r.a.IMAGE_BASE_URL+t.answer_img,i.answers[n]||(i.answers[n]=[]),i.answers[n].push(t),i.onClear(n)}),this.snackbarService.displayError))}},{key:"onClear",value:function(t){this.addClicked[t]=!1,this.imgSrc[t]="",this.image[t]=null}},{key:"onUpdate",value:function(t,e,n,i){var a=this;this.subscriptionsArr.push(this.answerService.answerPut$(this.answers[i][t]._id,{answer:e,point:Number(n)}).subscribe((function(r){a.answers[i][t].answer=e,a.answers[i][t].point=Number(n)}),this.snackbarService.displayError))}},{key:"onDelete",value:function(t,e){var n=this;this.subscriptionsArr.push(this.answerService.answerDelete$(this.answers[e][t]._id).subscribe((function(i){n.answers[e].splice(t,1)}),this.snackbarService.displayError))}},{key:"onChange",value:function(t,e){var n=this;if("image"===t[0].type.substring(0,t[0].type.indexOf("/"))){this.image[e]=t[0];var i=new FileReader;i.readAsDataURL(t[0]),i.onload=function(t){n.imgSrc[e]=i.result}}}},{key:"ngOnDestroy",value:function(){this.subscriptionsArr.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||L)(s.Mb(u),s.Mb(N.a),s.Mb(l.a),s.Mb(d.a),s.Mb(C.a))},L.\u0275cmp=s.Gb({type:L,selectors:[["app-exam-questions"]],hostBindings:function(t,e){1&t&&s.Zb("paste",(function(t){return e.handleImgPaste(t.clipboardData.files)}),!1,s.mc)},decls:10,vars:1,consts:[[1,"add-question"],["matInput","","placeholder","","type","text",3,"input"],["search",""],["mat-raised-button","","color","primary",1,"question-btn-add",3,"click"],[1,"wrapper"],["class","question-card",4,"ngFor","ngForOf"],[1,"question-card"],[1,"exam-num"],["matInput","","type","number",3,"value","input"],["parentExamNumRef",""],[1,"question-question"],["matInput","","type","text","rows","8",3,"value","input"],["questionRef",""],[1,"question-img"],["mat-card-image","","alt","",3,"src",4,"ngIf"],[1,"answer-header"],[1,"titles"],[1,"answer-title"],[1,"point-title"],[1,"img-title"],[1,"add-wrapper"],["mat-icon-button","","color","primary",3,"click"],["class","wrapper-answer",4,"ngFor","ngForOf"],["class","wrapper-answer",4,"ngIf"],["mat-raised-button","","color","primary",1,"question-btn",3,"disabled","click"],["mat-raised-button","","color","warn",1,"question-btn",3,"click"],["mat-card-image","","alt","",3,"src"],[1,"wrapper-answer"],["matInput","","placeholder","","type","text",3,"value"],["answerInput",""],[1,"point"],["pointInput",""],[1,"img-form-field"],["alt","",3,"src"],[1,"actions"],["mat-icon-button","","color","warn",3,"click"],["matInput","","placeholder","","type","text"],["newAnswerInput",""],["newPointInput",""],[1,"label"],[1,"title"],["type","file",3,"change"],["alt","","class","popUp-image",3,"src",4,"ngIf"],["alt","",1,"popUp-image",3,"src"]],template:function(t,e){if(1&t){var n=s.Sb();s.Rb(0,"div",0),s.Rb(1,"mat-form-field"),s.Rb(2,"mat-label"),s.uc(3,"Search Question"),s.Qb(),s.Rb(4,"input",1,2),s.Zb("input",(function(t){s.nc(n);var i=s.lc(5);return e.onSearchChange(i.value)})),s.Qb(),s.Qb(),s.Rb(6,"button",3),s.Zb("click",(function(t){return e.onQuestionAdd()})),s.uc(7,"Add question"),s.Qb(),s.Qb(),s.Rb(8,"div",4),s.tc(9,F,36,6,"mat-card",5),s.Qb()}2&t&&(s.Bb(9),s.ic("ngForOf",e.questionsToShow))},directives:[b.b,b.e,p.a,m.a,a.i,T,$,a.j,A,j.a,I,D],styles:[".add-question[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.add-question[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-left:10px;margin-top:1%}.add-question[_ngcontent-%COMP%]   .question-btn-add[_ngcontent-%COMP%]{margin-right:2.5%;margin-top:1%}.wrapper[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;-webkit-box-pack:space-evenly;justify-content:space-evenly}.question-card[_ngcontent-%COMP%]{position:relative;width:420px;height:635px;margin:5px}.question-card[_ngcontent-%COMP%]   .question-img[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{display:block;width:40%;max-height:200px;margin:0 auto;position:absolute;top:10px;right:10px;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.question-card[_ngcontent-%COMP%]   .question-img[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]:hover{-webkit-transform:scale(2.5);transform:scale(2.5);z-index:100}.question-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:block}.question-card[_ngcontent-%COMP%]   .exam-num[_ngcontent-%COMP%]{margin:0}.question-card[_ngcontent-%COMP%]   .question-question[_ngcontent-%COMP%]{word-wrap:break-word;width:55%;height:200px}.question-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{position:absolute;right:15px;bottom:15px}mat-card-content[_ngcontent-%COMP%]{position:absolute;top:35%;left:20px;width:100%}.answer-header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;width:90%}.answer-header[_ngcontent-%COMP%]   .titles[_ngcontent-%COMP%]{display:-webkit-box;display:flex;text-align:center;-webkit-box-align:center;align-items:center}.answer-header[_ngcontent-%COMP%]   .answer-title[_ngcontent-%COMP%]{width:185px}.answer-header[_ngcontent-%COMP%]   .point-title[_ngcontent-%COMP%]{width:30px;margin-left:12px}.answer-header[_ngcontent-%COMP%]   .img-title[_ngcontent-%COMP%]{width:30px;margin-left:35px}.wrapper-answer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;width:400px;height:55px}.wrapper-answer[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-left:20px}.point[_ngcontent-%COMP%]{width:30px}input[type=file][_ngcontent-%COMP%]{outline:0;opacity:0;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.label[_ngcontent-%COMP%]{width:100%;height:50px;padding-top:1%;-webkit-transition:border .3s ease;transition:border .3s ease;cursor:pointer;text-align:center}.label[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:grey;-webkit-transition:color .2s;transition:color .2s}.img-form-field[_ngcontent-%COMP%]{display:-webkit-box;display:flex;width:30px;height:30px}.img-form-field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;width:30px;height:30px}.img-form-field[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:10px;max-height:30px;max-width:40px;-webkit-transition:-webkit-transform .1s;transition:-webkit-transform .1s;transition:transform .1s;transition:transform .1s,-webkit-transform .1s}.img-form-field[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{z-index:100;-webkit-transform:scale(8);transform:scale(8)}.img-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}"]}),L),H=n("3Pt+");n.d(e,"QuestionModule",(function(){return K}));var J,V=[{path:"",component:k},{path:":id",component:z}],K=((J=function t(){_classCallCheck(this,t)}).\u0275mod=s.Kb({type:J}),J.\u0275inj=s.Jb({factory:function(t){return new(t||J)},providers:[d.a,u,N.a],imports:[[a.b,C.e.forChild(V),y.a,m.b,p.b,E,j.b,H.g]]}),J)}}]);